document.addEventListener('DOMContentLoaded', () => {
  const quizContent = document.getElementById('quiz-content');
  const resultContainer = document.getElementById('result');
  const resultText = document.getElementById('result-text');
  const resultImage = document.getElementById('result-image');
  const restartBtn = document.getElementById('restart-btn');
  const homeBtn = document.getElementById('home-btn');
  const progressBar = document.getElementById('progress-bar');
  const quizContainer = document.getElementById('quiz-container');

  const quizData = [
      {
        question: "Какой у тебя любимый цвет или какой предпочтешь?",
        image: "quiz1/1.jpg",
        answers: [
          { text: "Розовый, как окрасившееся от заката небо", type: "a" },
          { text: "Серыйб как тучи в пасмурный день", type: "b" },
          { text: "Краный, как цвет огня и бурных эмоций", type: "c" },
          { text: "Черный, как поздняя ночь с беззвездным небом", type: "d" },
          { text: "Белый, как... отсутствие цвета тоже можно любить", type: "e" }
        ]
      },
      {
        question: "Как ты проводишь свободное время?",
        image: "quiz1/2.jpg",
        answers: [
          { text: "Предпочту спать либо же отдыхать. Жизнь тяжелее, чем может показаться", type: "a" },
          { text: "Игры, шалости, развлечения - трачу свободное время на что-то безудержно веселое", type: "c" },
          { text: "Люблю наблюдать и размышлять об увиденном. Мысли всегда заполоняют мою голову", type: "b" },
          { text: "Развитие является немаловажным аспектом в жизни человека. У меня нет свободного времени - я учусь, много читаю и познаю новое", type: "d" },
          { text: "Активность! Спорт, работа... Что-то, что требует большого потока энергии, который окупается результатами", type: "e" }
        ]
      },
      {
        question: "Что ты предпочтешь из еды??",
        image: "quiz1/3.jpg",
        answers: [
          { text: "Как можно жить без сладостей?", type: "a" },
          { text: "Многие не любят рыбу, и я в недоумении. Она ведь полезнаяя...", type: "c" },
          { text: "Природа разнообразна своим богатством овощей: я выбираю их", type: "b" },
          { text: "Презираю вегетарианцев. Я за мясо", type: "d" },
          { text: "Совмещаю сладкое и полезное - фрукты", type: "e" }
        ]
      },
      {
        question: "Какой стиль одежды тебе ближе?",
        image: "quiz1/4.jpg",
        answers: [
          { text: "Милый, романтичный, малость мечтательный", type: "a" },
          { text: "Минимализм и спокойствие. В мире достаточно визуального шума", type: "b" },
          { text: "Яркий, смелый. Это отражает мою личность в полной мере", type: "c" },
          { text: "Классика и элегантность. Брюки, рубашки и лакированые туфли превыше моих сил", type: "d" },
          { text: "Спортивный и удобный. Я не наряжаюсь без надобности: зачем тратить на это и время, и энергию?", type: "e" }
        ]
      },
      {
        question: "Ты не спал всю ночь, встречая рассвет. Утро наступило, смывая остатки усталости. Какие звуки ты слышишь?",
        image: "quiz1/5мб.jpg",
        answers: [
          { text: "Пение птиц подле деревьев под подъездом", type: "a" },
          { text: "Шепот ветра сквозь открытое окно", type: "b" },
          { text: "Музыка и танцы. Кто-то также не спит, как и ты", type: "c" },
          { text: "Тишина. Я устал и не хочу ничего слышать. Все спят", type: "d" },
          { text: "Шум города. Куча людей, словно муравьи, пробегают мимо зданий. Гул машин также дополняет то, что слышу я", type: "e" }
        ]
      },
      {
        question: "Куда бы ты поехал в отпуск?",
        image: "quiz1/6.jpg",
        answers: [
          { text: "На пляж. Море, песок, все дела", type: "a" },
          { text: "В горы. Бескрайние пейзажи и горизонты", type: "b" },
          { text: "В большой город. Можно закупиться чем-нибудь новеньким и понблюдать за другой жизнью", type: "e" },
          { text: "В загородный дом. Один, с друзьями - без разницы. Главное - подальше от рутины", type: "d" },
          { text: "В приключенческий тур. Это весело, достаточно активно и познавательно", type: "c" }
        ]
      },
      {
        question: "Какое животное тебе ближе?",
        image: "quiz1/7.jpg",
        answers: [
          { text: "Кошки, гуляющие сами по себе. Я такой же", type: "a" },
          { text: "Сова. И нет, не потому что не сплю по ночам", type: "b" },
          { text: "Обезьянка. Милые, забавные, но умные", type: "c" },
          { text: "Лошадь. Мощные животные, способные вынести многое", type: "d" },
          { text: "Собака - верный друг человека", type: "e" }
        ]
      },
      {
        question: "Что тебя вдохновляет?",
        image: "quiz1/8.jpg",
        answers: [
          { text: "Природа, окружающая меня изо дня в день. Специально ради этого выбираюсь на прогулки", type: "a" },
          { text: "Книги. Невероятные выдуманные миры с неординарными персонажами и страстными сюжетами заставляют меня раствориться в них", type: "b" },
          { text: "Друзья и веселье. Все люди такие разные, но в каждом раскрывается позитив, заставляющий меня становитьяс сильнее и смелее", type: "c" },
          { text: "Искусство и музыка. Множество людей разговаривает с нами посредством искусства, и я желаю услышать каждого", type: "d" },
          { text: "Спорт и движение. Энергия так и хлещет из меня - я стремлюсь выплеснуть ее в движении", type: "e" }
        ]
      },
      {
        question: "Твой любимый напиток?",
        image: "quiz1/9.jpg",
        answers: [
          { text: "Чай с медом, согревающий и тело, и душу в холодный вечер", type: "a" },
          { text: "Зеленый чай - тонизирует, отрезвляет разум и дает насладиться ощущением весны", type: "b" },
          { text: "Коктейль. Они ведь такие разные бывают. Хочу почувствовать весь спектр вкусовых ощущений", type: "c" },
          { text: "Кофе. Самое то для долго тяжелого дня после раннего пробуждения. И да, я вновь не выспался", type: "d" },
          { text: "Прохладная вода, может быть, с лимоном. Ценю природные источники в чистом виде", type: "e" }
        ]
      },
      {
        question: "Что для тебя важно в дружбе?",
        image: "quiz1/10.jpg",
        answers: [
          { text: "Теплота и забота. Мне важно чувствовать, что обо мне искренне беспокоятся, обнимают, поддерживают теплыми словами и действиями", type: "a" },
          { text: "Понимание и спокойствие. Я ценю, когда меня слушают без осуждения, принимают мои мысли и чувства. Гармония и душевный комфорт для меня важнее", type: "b" },
          { text: "Веселье и приключения. Хочу, чтобы рядом был человек, с которым можно сорваться в спонтанное путешествие, смеяться до упаду и превращать каждый день в праздник", type: "c" },
          { text: "Верность и надежность. Для меня главное — знать, что на человека можно положиться в любой ситуации. Чувство безопасности и преданность дороже ярких эмоций", type: "d" },
          { text: "Поддержка и активность. Мне нужен тот, кто будет мотивировать меня на достижения, разделит мои увлечения и всегда подставит плечо в трудную минуту.", type: "e" }
        ]
      }
  ];

  let currentQuestionIndex = 0;
  let answersCount = { a: 0, b: 0, c: 0, d: 0, e: 0 };

  function showQuestion() {
    if (currentQuestionIndex >= quizData.length) {
      showResult();
      return;
    }

    progressBar.style.width = `${(currentQuestionIndex / quizData.length) * 100}%`;

    const q = quizData[currentQuestionIndex];
    quizContent.innerHTML = `
      <img src="${q.image}" alt="Иллюстрация к вопросу" class="question-image" />
      <h2>${q.question}</h2>
      <div class="answers-list">
        ${q.answers.map(ans =>
          `<button class="answer-btn" data-type="${ans.type}">${ans.text}</button>`
        ).join('')}
      </div>
    `;

    document.querySelectorAll('.answer-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const type = btn.getAttribute('data-type');
        answersCount[type]++;
        currentQuestionIndex++;
        showQuestion();
      });
    });
  }

  function showResult() {
    progressBar.style.width = '100%';
    quizContainer.style.display = 'none';
    resultContainer.style.display = 'block';

    const maxType = Object.keys(answersCount).reduce((a, b) =>
      answersCount[a] > answersCount[b] ? a : b
    );

    const results = {
      a: {
        text: "Уютный и заботливый котик. Ты — воплощение домашнего тепла! Твой идеальный вечер — это мягкий плед, вкусный чай и душевные разговоры. Ты умеешь создавать атмосферу, в которой все чувствуют себя в безопасности. Твоя забота проявляется в мелочах: вовремя подогретый суп, тёплое слово или просто готовность выслушать. Ты веришь, что мир становится лучше, когда в нём больше доброты.",
        image: "result1/1.jpg"
      },
      b: {
        text:"Вдумчивый и спокойный котик. Ты — философ с пушистой душой. Любишь тишину, долгие размышления и моменты, когда можно просто наблюдать за миром. Дождливые дни, книги и неспешные прогулки — твоя стихия. Ты не из тех, кто бросается в омут с головой: сначала анализируешь, взвешиваешь, а потом действуешь. И это делает тебя мудрым советчиком для других.",
        image:"result1/2.jpg"
      },
      c: {
        text:"Игривый и авантюрный котик. Ты — вечный двигатель веселья! С тобой невозможно заскучать: то спонтанный поход в горы, то ночные танцы на кухне, то смешные челленджи с друзьями. Ты считаешь, что жизнь — это игра, и чем активнее в неё играешь, тем интереснее. Твоя энергия заразительна, а умение радоваться мелочам вдохновляет окружающих.",
        image:"result1/3.jpg"
      },
      d: {
        text:"Надежный и гармоничный котик. Ты — эталон стабильности и вкуса. Ценишь качество во всём: от хорошей музыки до крепкой дружбы. Ты не любитель хаоса, предпочитаешь продуманный уют и проверенные временем вещи. На тебя можно положиться в любой ситуации, а твоё умение сохранять хладнокровие восхищает.",
        image:"result1/4.jpg"
      },
      e: {
        text:"Энергичный и целеустремленный котик. Ты — ураган в лучшем смысле! Спорт, путешествия, новые проекты — тебе постоянно нужно движение. Сидеть на месте? Нет, не слышал. Ты заряжаешь других своей активностью, а твоя уверенность помогает добиваться целей. Главное — не забывай иногда отдыхать, даже супергероям нужно перезаряжаться!",
        image:"result1/5.jpg"
      }
    };

    resultText.textContent = results[maxType].text;
    resultImage.src = results[maxType].image;
    resultImage.alt = "Иллюстрация результата";
  }

  restartBtn.addEventListener('click', () => {
    currentQuestionIndex = 0;
    answersCount = { a: 0, b: 0, c: 0, d: 0, e: 0 };
    quizContainer.style.display = 'block';
    resultContainer.style.display = 'none';
    showQuestion();
  });

  homeBtn.addEventListener('click', () => {
    window.location.href = 'quiz-list.html';
  });

  showQuestion();
});
